<!DOCTYPE html>
<html>
<body>
<script src="javascript/html.js"></script>

<h2>Use the XMLHttpRequest to get the content of a file.</h2>
<p>The content is written in JSON format, and can easily be converted into a JavaScript object.</p>
<p>Take a look at <img src=images/4.png></p>
<p id="wrap"></p>

<script>

    var client = new HttpClient();
    var images;
    var i = 0;

    function getMoreImages(){
        client.get('test-files/images.json', function(response) {
            images = JSON.parse(response)["images"];
            i = 0;
        });
    }
    getMoreImages();

    function yHandler(){
        var wrap = document.getElementById('wrap');
        var contentHeight = wrap.offsetHeight;
        var yOffset = window.pageYOffset;
        var y = yOffset + window.innerHeight;
        if(y >= contentHeight){
            wrap.innerHTML += '<div><img src=' + images[i]["url"] + '></div>';
            i++;

            if(i >= 9) {
                getMoreImages();
            }
        }
    }
    window.onscroll = yHandler;

</script>

</body>
</html>




